<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <script src='https://www.google.com/recaptcha/api.js'></script>
    <link rel="stylesheet" type="text/css" href="style/home.css">
    <title>Chat Application</title>

    <!-- CSS only -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="style/home.css">

</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light" style="background-color: #4481bb!important;">
        <a class="navbar-brand" style="padding: 0;" href="/"><img src="img/logo.jfif" alt="Logo"
                height="70px"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" style="background-color: #4481bb;" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" style="color: white; font-size: x-large;" href="/">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="color: white; font-size: x-large;" href="/about">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="color: white; font-size: x-large;" href="/">Chat with Someone</a>
                </li>
                <!-- <li class="nav-item">
                    <a class="nav-link" style="color: white; font-size: x-large;" href="">Connected Users: <span id="users"> </span></a>
                </li> -->
            </ul>
            <span class="navbar-text">
                <a class="nav-link" style="color: white; font-size: x-large;" href="">Connected Users: <span id="users"> </span></a>
              </span>
        </div>
    </nav>

    <div class="container" style="margin-top: 10px;">

        <!-- <form action="https://www.google.com/recaptcha/api/siteverify" method="POST">
            <div class="g-recaptcha" data-sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"></div>
            <br />
            <input type="submit" value="Submit">
        </form> -->

        <h1>
            Welcome to our website where you can chat anonymously with strangers.
        </h1>

        <div>
            <h2>
                Talk to Someone Online
            </h2>
            <P>
                Chat with someone in private chat rooms. Find new friends or date online â€“ with real users from almost
                195 countries waiting for you.
                We are working hard to keep <b> Chat Rooms Clean, </b> keeping the bots out and real people in.
                We succeeded more with our authenticated users.
            </P>
            <h3>
                Find Someone Online to talk
            </h3>
            <p>
                Chat123&copy; is an online community with the ambition to group people who are trying to find new
                friends. We
                aim to provide the most exciting public chat rooms and the most interesting private face to face chat
                rooms.

            </p>
        </div>

        <script src='https://www.google.com/recaptcha/api.js'></script>
        <script>
            function submitUserForm() {
                var response = grecaptcha.getResponse();
                if (response.length == 0) {
                    document.getElementById('g-recaptcha-error').innerHTML =
                        '<span style="color:red;">This field is required.</span>';
                    return false;
                }
                return true;
            }

            function verifyCaptcha() {
                document.getElementById('g-recaptcha-error').innerHTML = '';
                // window.location.href = '/chat';
                // document.getElementById('chat_btn').style.display = 'block';
                window.location.href = '/chat';
            }

            var count = localStorage.getItem("count");
            console.log("count = ", count - 1);

            function chat_btn() {
                if (parseInt(count) == 0) {
                    window.location.href = '/chat';
                } else {
                    document.getElementById('human_verif_form').style.display = 'block';
                }
            }
        </script>

        <div style="padding-top: 30px; margin-bottom: 25px;">
            <button type="button" class="btn btn-primary" id="chat_btn"
            onclick="chat_btn()">Chat with Someone</button>
        </div>

        <div id="human_verif_form" style="display: none; margin-top: 30px; margin-bottom: 65px;">
            <h3 style="width: 50%; margin-bottom:15px; ">
                Please verify that you are a human.
            </h3>
            <form method="post" id="verif_form" style="margin: 0;" onsubmit="return submitUserForm();">
                <div class="g-recaptcha" data-sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"
                    data-callback="verifyCaptcha"></div>
                <div id="g-recaptcha-error"></div>
                <!-- <input type="submit" name="submit" value="Submit" /> -->
            </form>
        </div>


    </div>

    <div id="footer"
        style="bottom: 0; left: 0;  margin-bottom: 0; height: 45px; width: 100%; padding-top: 15px">

        <p class="footer-links">
            <a href="/" id="company">Chat123&copy;</a>

            <a href="/privacy" id="privacy">Privacy Policy</a>
        </p>
    </div>

    <script>
        var socket = io();

        var total_users = 0;

        document.getElementById("users").innerHTML = total_users;

        socket.on('users', function (users) {
            total_users = users.users;
            console.log("Total number of users are ", total_users);
            document.getElementById("users").innerHTML = total_users;
        });
    </script>

    <!-- JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous"></script>

</body>

</html>